const fs = require('fs');
const crypto = require('crypto');
const path = require('path');

// IMPORTANT: This is the private key. Keep it safe and do not distribute it.
const VENDOR_PRIVATE_KEY = `-----BEGIN EC PRIVATE KEY-----
MHcCAQEEIPp5iNqVb7v5Z7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J7gL6J-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-1-dCgEC
-----END EC PRIVATE KEY-----
`;

function generateLicense(deviceId) {
  const payload = {
    deviceId,
    customer: 'Test Customer',
    plan: 'premium',
    issuedAt: new Date().toISOString(),
  };

  const sign = crypto.createSign('sha256');
  sign.update(JSON.stringify(payload));
  sign.end();

  const signature = sign.sign(VENDOR_PRIVATE_KEY, 'hex');

  const license = {
    payload,
    signature,
  };

  fs.writeFileSync(path.join(__dirname, 'license.json'), JSON.stringify(license, null, 2));
  console.log('License file generated: license.json');
}

const deviceId = process.argv[2];
if (!deviceId) {
  console.error('Usage: node license-gen.js <deviceId>');
  process.exit(1);
}

generateLicense(deviceId);
